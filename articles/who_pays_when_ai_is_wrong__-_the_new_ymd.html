<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Who Pays When A.I. Is Wrong? - English Novel Reader</title>
    <link rel="stylesheet" href="../styles.css">
    <style>
        /* Article reader specific styles */
        .article-content {
            max-width: 800px;
            margin: 100px auto;
            padding: 30px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .article-title {
            font-size: 1.8rem;
            color: #5a3e2b;
            margin-bottom: 10px;
            font-family: Georgia, serif;
        }
        
        .article-title-chinese {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 30px;
            font-family: 'Microsoft YaHei', sans-serif;
            opacity: 0.8;
        }
        
        .article-paragraph {
            margin-bottom: 25px;
            line-height: 1.8;
        }
        
        .english-text {
            font-family: Georgia, serif;
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 15px;
        }
        
        .chinese-text {
            font-family: 'Microsoft YaHei', sans-serif;
            font-size: 1rem;
            color: #666;
            opacity: 0.7;
            margin-bottom: 30px;
            padding-left: 20px;
            border-left: 3px solid #d4a76a;
        }
        
        .back-btn {
            display: inline-block;
            background-color: #5a3e2b;
            color: #fff;
            padding: 10px 20px;
            border-radius: 6px;
            text-decoration: none;
            font-family: 'Microsoft YaHei', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }
        
        .back-btn:hover {
            background-color: #7a5c42;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .loading-translation {
            font-style: italic;
            color: #999;
        }
    </style>
</head>
<body>
    <!-- Top Navigation -->
    <nav class="top-nav">
        <ul>
            <li><a href="../index.html">小说</a></li>
            <li><a href="../webnovels.html">网文</a></li>
            <li><a href="../about.html">关于我</a></li>
        </ul>
    </nav>
    
    <div class="container">
        <div class="main-content">
            <div class="article-content">
                <a href="../webnovels.html" class="back-btn">← 返回网文列表</a>
                <h1 class="article-title">Who Pays When A.I. Is Wrong?</h1>
                <div class="article-title-chinese loading-translation" data-english="Who Pays When A.I. Is Wrong?">正在翻译标题...</div>
                <div id="articleBody">
                    <div class="article-paragraph">
                        <div class="english-text">Wolf River Electric sued Google when A.I.-generated search results fabricated a lawsuit against the company. Its executives include, from left, Luka Bozek, Vladimir Marchenko and Justin Nielsen.Credit...Tim Gruber for The New York Times</div>
                        <div class="chinese-text loading-translation" data-english="Wolf River Electric sued Google when A.I.-generated search results fabricated a lawsuit against the company. Its executives include, from left, Luka Bozek, Vladimir Marchenko and Justin Nielsen.Credit...Tim Gruber for The New York Times">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">New court cases seek to define content created by artificial intelligence as defamatory --- a novel concept that has captivated some legal experts.</div>
                        <div class="chinese-text loading-translation" data-english="New court cases seek to define content created by artificial intelligence as defamatory --- a novel concept that has captivated some legal experts.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Wolf River Electric sued Google when A.I.-generated search results fabricated a lawsuit against the company. Its executives include, from left, Luka Bozek, Vladimir Marchenko and Justin Nielsen.Credit...Tim Gruber for The New York Times</div>
                        <div class="chinese-text loading-translation" data-english="Wolf River Electric sued Google when A.I.-generated search results fabricated a lawsuit against the company. Its executives include, from left, Luka Bozek, Vladimir Marchenko and Justin Nielsen.Credit...Tim Gruber for The New York Times">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Sales representatives for Wolf River Electric, a solar contractor in Minnesota, noticed an unusual uptick in canceled contracts late last year. When they pressed the former customers for an explanation, the answers left them floored.</div>
                        <div class="chinese-text loading-translation" data-english="Sales representatives for Wolf River Electric, a solar contractor in Minnesota, noticed an unusual uptick in canceled contracts late last year. When they pressed the former customers for an explanation, the answers left them floored.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">The clients said they had bailed after learning from Google searches that the company settled a lawsuit with the state attorney general over deceptive sales practices. But the company had never been sued by the government, let alone settled a case involving such claims.</div>
                        <div class="chinese-text loading-translation" data-english="The clients said they had bailed after learning from Google searches that the company settled a lawsuit with the state attorney general over deceptive sales practices. But the company had never been sued by the government, let alone settled a case involving such claims.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Confusion became concern when Wolf River executives checked for themselves. Search results that Gemini, Google's artificial intelligence technology, delivered at the top of the page included the falsehoods. And mentions of a legal settlement populated automatically when they typed "Wolf River Electric" in the search box.</div>
                        <div class="chinese-text loading-translation" data-english="Confusion became concern when Wolf River executives checked for themselves. Search results that Gemini, Google's artificial intelligence technology, delivered at the top of the page included the falsehoods. And mentions of a legal settlement populated automatically when they typed "Wolf River Electric" in the search box.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">A version of this article appears in print on Nov. 13, 2025, Section A, Page 1 of the New York edition with the headline: Can the Victim Of A.I. Errors Win in Court?. Order Reprints \| Today's Paper \| Subscribe</div>
                        <div class="chinese-text loading-translation" data-english="A version of this article appears in print on Nov. 13, 2025, Section A, Page 1 of the New York edition with the headline: Can the Victim Of A.I. Errors Win in Court?. Order Reprints \| Today's Paper \| Subscribe">正在翻译...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="../script.js"></script>
    <script>
        // Translation cache management
        const TRANSLATION_CACHE = {
            get: (key) => {
                try {
                    const cacheItem = localStorage.getItem('translation_' + key);
                    if (cacheItem) {
                        const parsed = JSON.parse(cacheItem);
                        // Check if cache is still valid (7 days)
                        if (Date.now() - parsed.timestamp < 7 * 24 * 60 * 60 * 1000) {
                            return parsed.translation;
                        }
                    }
                } catch (e) {
                    console.error('Cache read error:', e);
                }
                return null;
            },
            set: (key, translation) => {
                try {
                    localStorage.setItem('translation_' + key, JSON.stringify({
                        translation,
                        timestamp: Date.now()
                    }));
                } catch (e) {
                    console.error('Cache write error:', e);
                }
            }
        };
        
        // Function to translate a paragraph with caching
        async function translateParagraph(text, element) {
            // Generate cache key from text
            const cacheKey = btoa(text.trim().toLowerCase());
            
            // Check if translation is in cache
            const cachedTranslation = TRANSLATION_CACHE.get(cacheKey);
            if (cachedTranslation) {
                element.textContent = cachedTranslation;
                element.classList.remove('loading-translation');
                return;
            }
            
            // Translation APIs configuration
            const apis = [
                {
                    name: 'MyMemory',
                    url: 'https://api.mymemory.translated.net/get?q=' + encodeURIComponent(text) + '&langpair=en|zh'
                },
                {
                    name: 'Google Translate',
                    url: 'https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=zh-CN&dt=t&q=' + encodeURIComponent(text)
                }
            ];
            
            // Try APIs in order
            for (const api of apis) {
                try {
                    const response = await fetch(api.url, {
                        mode: 'cors',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        // Add timeout for faster failure on slow connections
                        signal: AbortSignal.timeout(5000)
                    });
                    
                    if (api.name === 'MyMemory') {
                        const data = await response.json();
                        if (data.responseStatus === 200 && data.responseData.translatedText) {
                            const translation = data.responseData.translatedText;
                            TRANSLATION_CACHE.set(cacheKey, translation);
                            element.textContent = translation;
                            element.classList.remove('loading-translation');
                            return;
                        }
                    } else if (api.name === 'Google Translate') {
                        const data = await response.json();
                        if (data && data[0] && Array.isArray(data[0])) {
                            const translation = data[0].map(function(item) { return item[0]; }).join('');
                            if (translation) {
                                TRANSLATION_CACHE.set(cacheKey, translation);
                                element.textContent = translation;
                                element.classList.remove('loading-translation');
                                return;
                            }
                        }
                    }
                } catch (error) {
                    console.error(api.name + ' translation error:', error);
                    // Continue to next API if current one fails
                    continue;
                }
            }
            
            // Fallback if all APIs fail
            const fallbackTranslation = element.classList.contains('article-title-chinese') ? '文章标题翻译' : '这是文章内容的中文翻译。';
            element.textContent = fallbackTranslation;
            element.classList.remove('loading-translation');
        }
        
        // Translate all paragraphs when the page loads with optimized concurrency
        document.addEventListener('DOMContentLoaded', function() {
            const chineseTexts = document.querySelectorAll('.chinese-text, .article-title-chinese');
            
            // Limit concurrent translations to avoid overloading API
            const CONCURRENCY_LIMIT = 3;
            let activeTranslations = 0;
            let index = 0;
            
            // Function to process next translation
            const processNext = function() {
                if (index >= chineseTexts.length) return;
                
                // Wait if we've reached concurrency limit
                if (activeTranslations >= CONCURRENCY_LIMIT) {
                    setTimeout(processNext, 100);
                    return;
                }
                
                const element = chineseTexts[index++];
                const englishText = element.getAttribute('data-english');
                
                activeTranslations++;
                translateParagraph(englishText, element)
                    .finally(function() {
                        activeTranslations--;
                        processNext(); // Process next translation when current one finishes
                    });
            };
            
            // Start processing translations
            for (let i = 0; i < CONCURRENCY_LIMIT; i++) {
                processNext();
            }
        });
    </script>
</body>
</html>