<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New ways to plan travel with AI in Search - English Novel Reader</title>
    <link rel="stylesheet" href="../styles.css">
    <style>
        /* Article reader specific styles */
        .article-content {
            max-width: 800px;
            margin: 100px auto;
            padding: 30px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .article-title {
            font-size: 1.8rem;
            color: #5a3e2b;
            margin-bottom: 10px;
            font-family: Georgia, serif;
        }
        
        .article-title-chinese {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 30px;
            font-family: 'Microsoft YaHei', sans-serif;
            opacity: 0.8;
        }
        
        .article-paragraph {
            margin-bottom: 25px;
            line-height: 1.8;
        }
        
        .english-text {
            font-family: Georgia, serif;
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 15px;
        }
        
        .chinese-text {
            font-family: 'Microsoft YaHei', sans-serif;
            font-size: 1rem;
            color: #666;
            opacity: 0.7;
            margin-bottom: 30px;
            padding-left: 20px;
            border-left: 3px solid #d4a76a;
        }
        
        .back-btn {
            display: inline-block;
            background-color: #5a3e2b;
            color: #fff;
            padding: 10px 20px;
            border-radius: 6px;
            text-decoration: none;
            font-family: 'Microsoft YaHei', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }
        
        .back-btn:hover {
            background-color: #7a5c42;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .loading-translation {
            font-style: italic;
            color: #999;
        }
    </style>
</head>
<body>
    <!-- Top Navigation -->
    <nav class="top-nav">
        <ul>
            <li><a href="../index.html">小说</a></li>
            <li><a href="../webnovels.html">网文</a></li>
            <li><a href="../about.html">关于我</a></li>
        </ul>
    </nav>
    
    <div class="container">
        <div class="main-content">
            <div class="article-content">
                <a href="../webnovels.html" class="back-btn">← 返回网文列表</a>
                <h1 class="article-title">New ways to plan travel with AI in Search</h1>
                <div class="article-title-chinese loading-translation" data-english="New ways to plan travel with AI in Search">正在翻译标题...</div>
                <div id="articleBody">
                    <div class="article-paragraph">
                        <div class="english-text">It's holiday travel season! Whether you're visiting family or just dreaming about next year's big vacation, now is a great time to start planning your next trip. And thanks to our latest AI upgrades, Search can handle some of the heavy lifting: New AI-powered features can help you build the perfect itinerary, find the best deals and turn your plans into bookings.</div>
                        <div class="chinese-text loading-translation" data-english="It's holiday travel season! Whether you're visiting family or just dreaming about next year's big vacation, now is a great time to start planning your next trip. And thanks to our latest AI upgrades, Search can handle some of the heavy lifting: New AI-powered features can help you build the perfect itinerary, find the best deals and turn your plans into bookings.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Canvas is a tool in AI Mode that gives you a space to organize plans and projects over time. And now, you can use Canvas to build travel plans that are customized for your specific needs. Just tell AI Mode what type of trip you're planning and the recommendations you're looking for, then select the option to "Create Canvas."</div>
                        <div class="chinese-text loading-translation" data-english="Canvas is a tool in AI Mode that gives you a space to organize plans and projects over time. And now, you can use Canvas to build travel plans that are customized for your specific needs. Just tell AI Mode what type of trip you're planning and the recommendations you're looking for, then select the option to "Create Canvas."">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Sorry, your browser doesn't support embedded videos, but don't worry, you can download it and watch it with your favorite video player!</div>
                        <div class="chinese-text loading-translation" data-english="Sorry, your browser doesn't support embedded videos, but don't worry, you can download it and watch it with your favorite video player!">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Right away, you'll get a plan in the Canvas side panel that brings together real-time Search data for flights and hotels, details from Google Maps like photos and reviews and relevant information from sites across the web. You'll find suggestions that fit your criteria, like hotel comparisons based on pricing and amenities or ideas for restaurants and activities optimized by travel time from where you're staying.</div>
                        <div class="chinese-text loading-translation" data-english="Right away, you'll get a plan in the Canvas side panel that brings together real-time Search data for flights and hotels, details from Google Maps like photos and reviews and relevant information from sites across the web. You'll find suggestions that fit your criteria, like hotel comparisons based on pricing and amenities or ideas for restaurants and activities optimized by travel time from where you're staying.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">To refine the plan and make it your own, you can ask follow-up questions and get help with tradeoffs, like choosing a hotel that's closer to brunch but a bit further from hiking trails. If you want to take a break, you can always jump back in and come back to the plan through your AI Mode history, via the menu on the top-left.</div>
                        <div class="chinese-text loading-translation" data-english="To refine the plan and make it your own, you can ask follow-up questions and get help with tradeoffs, like choosing a hotel that's closer to brunch but a bit further from hiking trails. If you want to take a break, you can always jump back in and come back to the plan through your AI Mode history, via the menu on the top-left.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Travel planning with Canvas is available on desktop in the U.S. for those opted into the AI Mode experiment in Labs.</div>
                        <div class="chinese-text loading-translation" data-english="Travel planning with Canvas is available on desktop in the U.S. for those opted into the AI Mode experiment in Labs.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Today, we're announcing the global expansion of Flight Deals, an AI-powered search tool we're testing within Google Flights that recently launched in the U.S., Canada and India. It's designed for flexible travelers who want to quickly find affordable destinations and save money on their next trip.</div>
                        <div class="chinese-text loading-translation" data-english="Today, we're announcing the global expansion of Flight Deals, an AI-powered search tool we're testing within Google Flights that recently launched in the U.S., Canada and India. It's designed for flexible travelers who want to quickly find affordable destinations and save money on their next trip.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Sorry, your browser doesn't support embedded videos, but don't worry, you can download it and watch it with your favorite video player!</div>
                        <div class="chinese-text loading-translation" data-english="Sorry, your browser doesn't support embedded videos, but don't worry, you can download it and watch it with your favorite video player!">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">To get started, just describe where, when and how you'd like to travel --- like you're talking to a friend --- and Flight Deals will use AI to understand what you're looking for and show the best bargains available.</div>
                        <div class="chinese-text loading-translation" data-english="To get started, just describe where, when and how you'd like to travel --- like you're talking to a friend --- and Flight Deals will use AI to understand what you're looking for and show the best bargains available.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Flight Deals has started rolling out to more than 200 countries and territories worldwide, including the U.K., France, Germany, Mexico, Brazil, Indonesia, Japan and Korea, along with support for more than 60 languages.</div>
                        <div class="chinese-text loading-translation" data-english="Flight Deals has started rolling out to more than 200 countries and territories worldwide, including the U.K., France, Germany, Mexico, Brazil, Indonesia, Japan and Korea, along with support for more than 60 languages.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">This week, we're bringing AI Mode's agentic capabilities to even more people, so you can take the hassle out of booking things, like restaurant reservations, event tickets or beauty and wellness appointments. Just describe what you're looking for with all your needs and preferences and AI Mode will search across multiple reservation platforms and websites to find real-time availability for options that meet your criteria.</div>
                        <div class="chinese-text loading-translation" data-english="This week, we're bringing AI Mode's agentic capabilities to even more people, so you can take the hassle out of booking things, like restaurant reservations, event tickets or beauty and wellness appointments. Just describe what you're looking for with all your needs and preferences and AI Mode will search across multiple reservation platforms and websites to find real-time availability for options that meet your criteria.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Sorry, your browser doesn't support embedded videos, but don't worry, you can download it and watch it with your favorite video player!</div>
                        <div class="chinese-text loading-translation" data-english="Sorry, your browser doesn't support embedded videos, but don't worry, you can download it and watch it with your favorite video player!">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Then, AI Mode will show you a curated list to choose from, with direct links so you can finalize your booking through partners like OpenTable, Resy, Tock, Ticketmaster, StubHub, SeatGeek, Vivid Seats, Booksy, Fresha and Vagaro.</div>
                        <div class="chinese-text loading-translation" data-english="Then, AI Mode will show you a curated list to choose from, with direct links so you can finalize your booking through partners like OpenTable, Resy, Tock, Ticketmaster, StubHub, SeatGeek, Vivid Seats, Booksy, Fresha and Vagaro.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Agentic booking for restaurants is rolling out this week on AI Mode in the U.S. (no Labs opt-in required), so you can easily make plans for family dinners, date nights, holiday brunches and more. And as we recently shared, agentic booking for event tickets and local appointments is available to all U.S. Labs users.</div>
                        <div class="chinese-text loading-translation" data-english="Agentic booking for restaurants is rolling out this week on AI Mode in the U.S. (no Labs opt-in required), so you can easily make plans for family dinners, date nights, holiday brunches and more. And as we recently shared, agentic booking for event tickets and local appointments is available to all U.S. Labs users.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">In the future, we'll also make it possible to finish booking flights and hotels directly in AI Mode. We're working with industry partners to build an experience where you can simply describe what you're looking for to compare different flights or hotels and browse helpful information like schedules, prices, room photos, amenities and reviews. You'll be able to follow up and refine your options, and then once you're ready, you can quickly complete the booking with the partner of your choice.</div>
                        <div class="chinese-text loading-translation" data-english="In the future, we'll also make it possible to finish booking flights and hotels directly in AI Mode. We're working with industry partners to build an experience where you can simply describe what you're looking for to compare different flights or hotels and browse helpful information like schedules, prices, room photos, amenities and reviews. You'll be able to follow up and refine your options, and then once you're ready, you can quickly complete the booking with the partner of your choice.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Sorry, your browser doesn't support embedded videos, but don't worry, you can download it and watch it with your favorite video player!</div>
                        <div class="chinese-text loading-translation" data-english="Sorry, your browser doesn't support embedded videos, but don't worry, you can download it and watch it with your favorite video player!">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Building a helpful experience for travelers requires deep collaboration with the industry, and we're already working with partners including Booking.com, Choice Hotels International, Expedia, IHG Hotels \& Resorts, Marriott International and Wyndham Hotels \& Resorts to make this possible. We're committed to partnering with travel companies of every size so you have all the best options at your fingertips.</div>
                        <div class="chinese-text loading-translation" data-english="Building a helpful experience for travelers requires deep collaboration with the industry, and we're already working with partners including Booking.com, Choice Hotels International, Expedia, IHG Hotels \& Resorts, Marriott International and Wyndham Hotels \& Resorts to make this possible. We're committed to partnering with travel companies of every size so you have all the best options at your fingertips.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">With today's updates, AI will handle more of the busywork --- so you can spend less time planning and more time having fun.</div>
                        <div class="chinese-text loading-translation" data-english="With today's updates, AI will handle more of the busywork --- so you can spend less time planning and more time having fun.">正在翻译...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="../script.js"></script>
    <script>
        // Translation cache management
        const TRANSLATION_CACHE = {
            get: (key) => {
                try {
                    const cacheItem = localStorage.getItem('translation_' + key);
                    if (cacheItem) {
                        const parsed = JSON.parse(cacheItem);
                        // Check if cache is still valid (7 days)
                        if (Date.now() - parsed.timestamp < 7 * 24 * 60 * 60 * 1000) {
                            return parsed.translation;
                        }
                    }
                } catch (e) {
                    console.error('Cache read error:', e);
                }
                return null;
            },
            set: (key, translation) => {
                try {
                    localStorage.setItem('translation_' + key, JSON.stringify({
                        translation,
                        timestamp: Date.now()
                    }));
                } catch (e) {
                    console.error('Cache write error:', e);
                }
            }
        };
        
        // Function to translate a paragraph with caching
        async function translateParagraph(text, element) {
            // Generate cache key from text
            const cacheKey = btoa(text.trim().toLowerCase());
            
            // Check if translation is in cache
            const cachedTranslation = TRANSLATION_CACHE.get(cacheKey);
            if (cachedTranslation) {
                element.textContent = cachedTranslation;
                element.classList.remove('loading-translation');
                return;
            }
            
            // Translation APIs configuration
            const apis = [
                {
                    name: 'MyMemory',
                    url: 'https://api.mymemory.translated.net/get?q=' + encodeURIComponent(text) + '&langpair=en|zh'
                },
                {
                    name: 'Google Translate',
                    url: 'https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=zh-CN&dt=t&q=' + encodeURIComponent(text)
                }
            ];
            
            // Try APIs in order
            for (const api of apis) {
                try {
                    const response = await fetch(api.url, {
                        mode: 'cors',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        // Add timeout for faster failure on slow connections
                        signal: AbortSignal.timeout(5000)
                    });
                    
                    if (api.name === 'MyMemory') {
                        const data = await response.json();
                        if (data.responseStatus === 200 && data.responseData.translatedText) {
                            const translation = data.responseData.translatedText;
                            TRANSLATION_CACHE.set(cacheKey, translation);
                            element.textContent = translation;
                            element.classList.remove('loading-translation');
                            return;
                        }
                    } else if (api.name === 'Google Translate') {
                        const data = await response.json();
                        if (data && data[0] && Array.isArray(data[0])) {
                            const translation = data[0].map(function(item) { return item[0]; }).join('');
                            if (translation) {
                                TRANSLATION_CACHE.set(cacheKey, translation);
                                element.textContent = translation;
                                element.classList.remove('loading-translation');
                                return;
                            }
                        }
                    }
                } catch (error) {
                    console.error(api.name + ' translation error:', error);
                    // Continue to next API if current one fails
                    continue;
                }
            }
            
            // Fallback if all APIs fail
            const fallbackTranslation = element.classList.contains('article-title-chinese') ? '文章标题翻译' : '这是文章内容的中文翻译。';
            element.textContent = fallbackTranslation;
            element.classList.remove('loading-translation');
        }
        
        // Translate all paragraphs when the page loads with optimized concurrency
        document.addEventListener('DOMContentLoaded', function() {
            const chineseTexts = document.querySelectorAll('.chinese-text, .article-title-chinese');
            
            // Limit concurrent translations to avoid overloading API
            const CONCURRENCY_LIMIT = 3;
            let activeTranslations = 0;
            let index = 0;
            
            // Function to process next translation
            const processNext = function() {
                if (index >= chineseTexts.length) return;
                
                // Wait if we've reached concurrency limit
                if (activeTranslations >= CONCURRENCY_LIMIT) {
                    setTimeout(processNext, 100);
                    return;
                }
                
                const element = chineseTexts[index++];
                const englishText = element.getAttribute('data-english');
                
                activeTranslations++;
                translateParagraph(englishText, element)
                    .finally(function() {
                        activeTranslations--;
                        processNext(); // Process next translation when current one finishes
                    });
            };
            
            // Start processing translations
            for (let i = 0; i < CONCURRENCY_LIMIT; i++) {
                processNext();
            }
        });
    </script>
</body>
</html>