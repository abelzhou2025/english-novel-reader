<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Why some health clinics are turning to AI to screen for tuberculosis - English Novel Reader</title>
    <link rel="stylesheet" href="../styles.css">
    <style>
        /* Article reader specific styles */
        .article-content {
            max-width: 800px;
            margin: 100px auto;
            padding: 30px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .article-title {
            font-size: 1.8rem;
            color: #5a3e2b;
            margin-bottom: 10px;
            font-family: Georgia, serif;
        }
        
        .article-title-chinese {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 30px;
            font-family: 'Microsoft YaHei', sans-serif;
            opacity: 0.8;
        }
        
        .article-paragraph {
            margin-bottom: 25px;
            line-height: 1.8;
        }
        
        .english-text {
            font-family: Georgia, serif;
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 15px;
        }
        
        .chinese-text {
            font-family: 'Microsoft YaHei', sans-serif;
            font-size: 1rem;
            color: #666;
            opacity: 0.7;
            margin-bottom: 30px;
            padding-left: 20px;
            border-left: 3px solid #d4a76a;
        }
        
        .back-btn {
            display: inline-block;
            background-color: #5a3e2b;
            color: #fff;
            padding: 10px 20px;
            border-radius: 6px;
            text-decoration: none;
            font-family: 'Microsoft YaHei', sans-serif;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }
        
        .back-btn:hover {
            background-color: #7a5c42;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .loading-translation {
            font-style: italic;
            color: #999;
        }
    </style>
</head>
<body>
    <!-- Top Navigation -->
    <nav class="top-nav">
        <ul>
            <li><a href="../index.html">小说</a></li>
            <li><a href="../webnovels.html">网文</a></li>
            <li><a href="../about.html">关于我</a></li>
        </ul>
    </nav>
    
    <div class="container">
        <div class="main-content">
            <div class="article-content">
                <a href="../webnovels.html" class="back-btn">← 返回网文列表</a>
                <h1 class="article-title">Why some health clinics are turning to AI to screen for tuberculosis</h1>
                <div class="article-title-chinese loading-translation" data-english="Why some health clinics are turning to AI to screen for tuberculosis">正在翻译标题...</div>
                <div id="articleBody">
                    <div class="article-paragraph">
                        <div class="english-text">Many low- and middle-income countries are using AI to screen for tuberculosis. This AI model produces what looks like a heat map with spots highlighted in yellow-red that indicate the algorithm detects signs of TB. ARCAD Santé PLUS hide caption</div>
                        <div class="chinese-text loading-translation" data-english="Many low- and middle-income countries are using AI to screen for tuberculosis. This AI model produces what looks like a heat map with spots highlighted in yellow-red that indicate the algorithm detects signs of TB. ARCAD Santé PLUS hide caption">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">On a Thursday morning last month, Boniaba Community Health Center in Mali was running a TB screening. There was no doctor in sight. Yet, a mother plagued by coughing got an answer in a matter of seconds: She was positive for TB.</div>
                        <div class="chinese-text loading-translation" data-english="On a Thursday morning last month, Boniaba Community Health Center in Mali was running a TB screening. There was no doctor in sight. Yet, a mother plagued by coughing got an answer in a matter of seconds: She was positive for TB.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">A few years ago, she'd have been lucky if there was a screening nearby. And still, she'd have had to wait a week or two for a sputum test to be sent to a lab and results to come back.</div>
                        <div class="chinese-text loading-translation" data-english="A few years ago, she'd have been lucky if there was a screening nearby. And still, she'd have had to wait a week or two for a sputum test to be sent to a lab and results to come back.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">The difference? A mobile x-ray machine and an AI algorithm are detecting TB. (In case you're not familiar with AI terminology --- this is basically a computer program trained on a whole lot of data.)</div>
                        <div class="chinese-text loading-translation" data-english="The difference? A mobile x-ray machine and an AI algorithm are detecting TB. (In case you're not familiar with AI terminology --- this is basically a computer program trained on a whole lot of data.)">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">TB is the world's top infectious disease killer --- with ++3,500 people++ dying of it each day for an annual total of more than 1.2 million deaths. And the numbers are going up. One of the hurdles in tackling the epidemic has been a global shortage of radiologists to diagnose this bacterial infection that usually affects the lungs.</div>
                        <div class="chinese-text loading-translation" data-english="TB is the world's top infectious disease killer --- with ++3,500 people++ dying of it each day for an annual total of more than 1.2 million deaths. And the numbers are going up. One of the hurdles in tackling the epidemic has been a global shortage of radiologists to diagnose this bacterial infection that usually affects the lungs.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">"There are countries in which there are less than five radiologists. It's like a disaster. And, even if you have some, they will always be in the capitals," says ++Dr. Lucica Ditiu++, executive director of the Stop TB Partnership, an advocacy organization.</div>
                        <div class="chinese-text loading-translation" data-english=""There are countries in which there are less than five radiologists. It's like a disaster. And, even if you have some, they will always be in the capitals," says ++Dr. Lucica Ditiu++, executive director of the Stop TB Partnership, an advocacy organization.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">For example, she says, a nomadic population in Nigeria is benefiting. "You're in the middle of nowhere. There are these guys. There's cattle. There is dust and nothing else. And they are doing these x-rays with AI. It's unreal," says Ditiu, whose organization was among the pioneers in developing this technology eight years ago.</div>
                        <div class="chinese-text loading-translation" data-english="For example, she says, a nomadic population in Nigeria is benefiting. "You're in the middle of nowhere. There are these guys. There's cattle. There is dust and nothing else. And they are doing these x-rays with AI. It's unreal," says Ditiu, whose organization was among the pioneers in developing this technology eight years ago.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">The AI models are also being used in refugee camps in Chad. "There are no radiologists. So who gets to look at the \x-ray\] and say: 'Is there a problem here or not?' Well, actually, AI does," say [++Peter Sands++, the executive director of the Global Fund to Fight AIDS, TB and Malaria, which has invested close to $200 million into AI-enabled TB screenings in the past four years. "It's brilliant."</div>
                        <div class="chinese-text loading-translation" data-english="The AI models are also being used in refugee camps in Chad. "There are no radiologists. So who gets to look at the \x-ray\] and say: 'Is there a problem here or not?' Well, actually, AI does," say [++Peter Sands++, the executive director of the Global Fund to Fight AIDS, TB and Malaria, which has invested close to $200 million into AI-enabled TB screenings in the past four years. "It's brilliant."">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Proponents say they are glimpsing the future, where AI accelerates the world's ability to detect and control diseases in some of the hardest-to-reach pockets of society. Others urge caution, saying more regulations and guardrails are necessary to protect patients in low- and middle-income countries.</div>
                        <div class="chinese-text loading-translation" data-english="Proponents say they are glimpsing the future, where AI accelerates the world's ability to detect and control diseases in some of the hardest-to-reach pockets of society. Others urge caution, saying more regulations and guardrails are necessary to protect patients in low- and middle-income countries.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">At the Boniaba Community Health Center, the mother is one of dozens of people who get an x-ray from a mobile x-ray machine that Diakité Lancine has set up. He's not a doctor but has been trained to take x-rays. The image he snaps is sent directly to his computer, where the AI model reads it and spits out a score based on how much AI thinks the image looks like TB and a picture of the person's lungs that looks almost like a heat map.</div>
                        <div class="chinese-text loading-translation" data-english="At the Boniaba Community Health Center, the mother is one of dozens of people who get an x-ray from a mobile x-ray machine that Diakité Lancine has set up. He's not a doctor but has been trained to take x-rays. The image he snaps is sent directly to his computer, where the AI model reads it and spits out a score based on how much AI thinks the image looks like TB and a picture of the person's lungs that looks almost like a heat map.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">"The blue there is nothing bad, but whenever you see the red --- the red means this part is not good," explains Lancine on the morning he screens the mother.</div>
                        <div class="chinese-text loading-translation" data-english=""The blue there is nothing bad, but whenever you see the red --- the red means this part is not good," explains Lancine on the morning he screens the mother.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">He works for the local nonprofit ARCAD Santé PLUS and does TB screenings around the West African country, arriving with just a few bags --- for his mobile x-ray machine, his computer and a battery pack in case there's no electricity.</div>
                        <div class="chinese-text loading-translation" data-english="He works for the local nonprofit ARCAD Santé PLUS and does TB screenings around the West African country, arriving with just a few bags --- for his mobile x-ray machine, his computer and a battery pack in case there's no electricity.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">As soon as the mother's screening comes back with several red patches, he collects a sputum sample to send to the lab for confirmation. Then he tells her to go home quickly and bring her five kids back so he can check them too. TB spreads through the air when someone with active TB coughs, laughs or talks and can be transmitted readily in households.</div>
                        <div class="chinese-text loading-translation" data-english="As soon as the mother's screening comes back with several red patches, he collects a sputum sample to send to the lab for confirmation. Then he tells her to go home quickly and bring her five kids back so he can check them too. TB spreads through the air when someone with active TB coughs, laughs or talks and can be transmitted readily in households.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Almost instantly, AI tells them: Three of her kids appear to have TB. Soon, Lacine says, they'll started on a six month course of antibiotics to treat the TB.</div>
                        <div class="chinese-text loading-translation" data-english="Almost instantly, AI tells them: Three of her kids appear to have TB. Soon, Lacine says, they'll started on a six month course of antibiotics to treat the TB.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">"Having AI makes a big difference," says Bassy Keita, the program officer at ARCAD Santé PLUS, which has received support from the Global Fund. He explains that producing sputum samples was often hard for kids --- it requires coughing up mucus from deep in the lungs. Since AI screenings were introduced they've been able to rapidly weed out the people who do not have any indication of TB on their x-rays and only doing sputum samples for those who the AI model shows could have TB. Since incorporating AI into their screenings, they've cut the number of sputum samples by about half.</div>
                        <div class="chinese-text loading-translation" data-english=""Having AI makes a big difference," says Bassy Keita, the program officer at ARCAD Santé PLUS, which has received support from the Global Fund. He explains that producing sputum samples was often hard for kids --- it requires coughing up mucus from deep in the lungs. Since AI screenings were introduced they've been able to rapidly weed out the people who do not have any indication of TB on their x-rays and only doing sputum samples for those who the AI model shows could have TB. Since incorporating AI into their screenings, they've cut the number of sputum samples by about half.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">As a professor and computer scientist at MIT, Regina Barzilay has spent years building AI models to detect breast cancer and lung cancer. Then, when a hospital in Sri Lanka told her it couldn't afford to buy off-the-shelf AI models for TB screenings, she agreed to build one for them.</div>
                        <div class="chinese-text loading-translation" data-english="As a professor and computer scientist at MIT, Regina Barzilay has spent years building AI models to detect breast cancer and lung cancer. Then, when a hospital in Sri Lanka told her it couldn't afford to buy off-the-shelf AI models for TB screenings, she agreed to build one for them.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">As she got to work this past year, she says, she immediately understood why TB is at the vanguard of the global health challenges with AI solutions.</div>
                        <div class="chinese-text loading-translation" data-english="As she got to work this past year, she says, she immediately understood why TB is at the vanguard of the global health challenges with AI solutions.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">"You can see TB. TB is visual. You have an x-ray. You have a label which says whether they have it or not --- and you just train the model," Barzilay says, adding that it only took her a few months and less than $50,000 to make her model. "It's straightforward, very cheap, very fast to develop."</div>
                        <div class="chinese-text loading-translation" data-english=""You can see TB. TB is visual. You have an x-ray. You have a label which says whether they have it or not --- and you just train the model," Barzilay says, adding that it only took her a few months and less than $50,000 to make her model. "It's straightforward, very cheap, very fast to develop."">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Unlike the equipment needed for mammograms or blood tests, x-ray machines for TB are widely available in low-resource settings. And it doesn't take much training for someone to use it.</div>
                        <div class="chinese-text loading-translation" data-english="Unlike the equipment needed for mammograms or blood tests, x-ray machines for TB are widely available in low-resource settings. And it doesn't take much training for someone to use it.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Plus, Ditiu adds, the need is huge. In 2023, there were 10.8 million new cases of TB up from 10.1 million in 2020, ++according to the WHO++++,++ with the vast majority of cases in low- and middle-income countries.</div>
                        <div class="chinese-text loading-translation" data-english="Plus, Ditiu adds, the need is huge. In 2023, there were 10.8 million new cases of TB up from 10.1 million in 2020, ++according to the WHO++++,++ with the vast majority of cases in low- and middle-income countries.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Ditiu believes TB is only the start. Some of the AI models used for TB can already diagnose other conditions, including lung cancer, pneumonia and certain cardiovascular issues.</div>
                        <div class="chinese-text loading-translation" data-english="Ditiu believes TB is only the start. Some of the AI models used for TB can already diagnose other conditions, including lung cancer, pneumonia and certain cardiovascular issues.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Barzilay predicts that in many low-income countries AI will soon be integrated into health systems similar to how much of Africa skipped over landlines and went straight to cell phones.</div>
                        <div class="chinese-text loading-translation" data-english="Barzilay predicts that in many low-income countries AI will soon be integrated into health systems similar to how much of Africa skipped over landlines and went straight to cell phones.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">"AI is going to be adopted much faster in developing countries because they have serious unmet needs and the clinician understands they need other help," she says. "Most of this technology is developed in the United States, but it's applied elsewhere."</div>
                        <div class="chinese-text loading-translation" data-english=""AI is going to be adopted much faster in developing countries because they have serious unmet needs and the clinician understands they need other help," she says. "Most of this technology is developed in the United States, but it's applied elsewhere."">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">She say places like the U.S. have been slower to integrate AI models into health care because, even if they are FDA approved, they are often not widely utilized or integrated into care guidelines drawn up by professional societies.</div>
                        <div class="chinese-text loading-translation" data-english="She say places like the U.S. have been slower to integrate AI models into health care because, even if they are FDA approved, they are often not widely utilized or integrated into care guidelines drawn up by professional societies.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Erwin John Carpio is a radiologist in the Philippines who recently helped the Philippines College of Radiologists draft AI guidelines. He has ++studied++ the use of AI to screen for TB in some of the country's far-flung provinces.</div>
                        <div class="chinese-text loading-translation" data-english="Erwin John Carpio is a radiologist in the Philippines who recently helped the Philippines College of Radiologists draft AI guidelines. He has ++studied++ the use of AI to screen for TB in some of the country's far-flung provinces.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">He says many high-income countries already have regulations and guardrails for using AI in health. "It is a real challenge for the developing nations, because usually the technology is offered to us for free. But you want to avoid \[problems\]," he says.</div>
                        <div class="chinese-text loading-translation" data-english="He says many high-income countries already have regulations and guardrails for using AI in health. "It is a real challenge for the developing nations, because usually the technology is offered to us for free. But you want to avoid \[problems\]," he says.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">For example, Carpio says, what happens when the AI model misses a TB diagnosis and it says someone is healthy when in fact they need medical attention?</div>
                        <div class="chinese-text loading-translation" data-english="For example, Carpio says, what happens when the AI model misses a TB diagnosis and it says someone is healthy when in fact they need medical attention?">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">In the U.K., he says, there's a system in place for reporting such situations and improving patient safety. There's a similar situation in the U.S. when the Food and Drug Administration approves an AI model. Not so in the Philippines, says Carpio, "in our country, we don't have the laws in place yet."</div>
                        <div class="chinese-text loading-translation" data-english="In the U.K., he says, there's a system in place for reporting such situations and improving patient safety. There's a similar situation in the U.S. when the Food and Drug Administration approves an AI model. Not so in the Philippines, says Carpio, "in our country, we don't have the laws in place yet."">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Another big worry he has is that a model won't let the users know if it's no longer working or just not sure about a case. He says models can "drift," meaning their performance deteriorates over time. "They fail silently. They don't tell you that they're making a mistake," Carpio says. "That's the main concern now."</div>
                        <div class="chinese-text loading-translation" data-english="Another big worry he has is that a model won't let the users know if it's no longer working or just not sure about a case. He says models can "drift," meaning their performance deteriorates over time. "They fail silently. They don't tell you that they're making a mistake," Carpio says. "That's the main concern now."">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">This worry about AI mistakes can be remedied by training the model to spit out complicated cases and by putting in place continual quality control checks by outside experts --- as happens in Lancine's screening program in Mali and other Global Fund-backed projects.</div>
                        <div class="chinese-text loading-translation" data-english="This worry about AI mistakes can be remedied by training the model to spit out complicated cases and by putting in place continual quality control checks by outside experts --- as happens in Lancine's screening program in Mali and other Global Fund-backed projects.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">But, this quality check takes "an entire team of experts," explains Carpio. "Not only will you need a radiologist, you're going to need a computer scientist, a data scientist \[and\] an AI engineer." Add this all up --- plus the enormous energy that AI consumes --- and it's not quite as cheap and easy as it looks, he says.</div>
                        <div class="chinese-text loading-translation" data-english="But, this quality check takes "an entire team of experts," explains Carpio. "Not only will you need a radiologist, you're going to need a computer scientist, a data scientist \[and\] an AI engineer." Add this all up --- plus the enormous energy that AI consumes --- and it's not quite as cheap and easy as it looks, he says.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Barzilay aruges that medical errors --- made by doctors --- are very common. And Sands, of the Global Fund, says that "we have to confront the fact that in many of the environments in which we're using this, there are very, very few radiologists \[to do TB diagnoses\]" --- so it's better than nothing.</div>
                        <div class="chinese-text loading-translation" data-english="Barzilay aruges that medical errors --- made by doctors --- are very common. And Sands, of the Global Fund, says that "we have to confront the fact that in many of the environments in which we're using this, there are very, very few radiologists \[to do TB diagnoses\]" --- so it's better than nothing.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">Sands points to data showing that the world has gotten substantially better at finding people with TB since the World Health Organization blessed the AI technology in 2021 and released a toolkit on how to properly calibrate it to each local population and setting.</div>
                        <div class="chinese-text loading-translation" data-english="Sands points to data showing that the world has gotten substantially better at finding people with TB since the World Health Organization blessed the AI technology in 2021 and released a toolkit on how to properly calibrate it to each local population and setting.">正在翻译...</div>
                    </div>
                    <div class="article-paragraph">
                        <div class="english-text">The big question Barzilay says she's left with: Will medical care be available for all the people getting diagnosed?</div>
                        <div class="chinese-text loading-translation" data-english="The big question Barzilay says she's left with: Will medical care be available for all the people getting diagnosed?">正在翻译...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="../script.js"></script>
    <script>
        // Translation cache management
        const TRANSLATION_CACHE = {
            get: (key) => {
                try {
                    const cacheItem = localStorage.getItem('translation_' + key);
                    if (cacheItem) {
                        const parsed = JSON.parse(cacheItem);
                        // Check if cache is still valid (7 days)
                        if (Date.now() - parsed.timestamp < 7 * 24 * 60 * 60 * 1000) {
                            return parsed.translation;
                        }
                    }
                } catch (e) {
                    console.error('Cache read error:', e);
                }
                return null;
            },
            set: (key, translation) => {
                try {
                    localStorage.setItem('translation_' + key, JSON.stringify({
                        translation,
                        timestamp: Date.now()
                    }));
                } catch (e) {
                    console.error('Cache write error:', e);
                }
            }
        };
        
        // Function to translate a paragraph with caching
        async function translateParagraph(text, element) {
            // Generate cache key from text
            const cacheKey = btoa(text.trim().toLowerCase());
            
            // Check if translation is in cache
            const cachedTranslation = TRANSLATION_CACHE.get(cacheKey);
            if (cachedTranslation) {
                element.textContent = cachedTranslation;
                element.classList.remove('loading-translation');
                return;
            }
            
            // Translation APIs configuration
            const apis = [
                {
                    name: 'MyMemory',
                    url: 'https://api.mymemory.translated.net/get?q=' + encodeURIComponent(text) + '&langpair=en|zh'
                },
                {
                    name: 'Google Translate',
                    url: 'https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=zh-CN&dt=t&q=' + encodeURIComponent(text)
                }
            ];
            
            // Try APIs in order
            for (const api of apis) {
                try {
                    const response = await fetch(api.url, {
                        mode: 'cors',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        // Add timeout for faster failure on slow connections
                        signal: AbortSignal.timeout(5000)
                    });
                    
                    if (api.name === 'MyMemory') {
                        const data = await response.json();
                        if (data.responseStatus === 200 && data.responseData.translatedText) {
                            const translation = data.responseData.translatedText;
                            TRANSLATION_CACHE.set(cacheKey, translation);
                            element.textContent = translation;
                            element.classList.remove('loading-translation');
                            return;
                        }
                    } else if (api.name === 'Google Translate') {
                        const data = await response.json();
                        if (data && data[0] && Array.isArray(data[0])) {
                            const translation = data[0].map(function(item) { return item[0]; }).join('');
                            if (translation) {
                                TRANSLATION_CACHE.set(cacheKey, translation);
                                element.textContent = translation;
                                element.classList.remove('loading-translation');
                                return;
                            }
                        }
                    }
                } catch (error) {
                    console.error(api.name + ' translation error:', error);
                    // Continue to next API if current one fails
                    continue;
                }
            }
            
            // Fallback if all APIs fail
            const fallbackTranslation = element.classList.contains('article-title-chinese') ? '文章标题翻译' : '这是文章内容的中文翻译。';
            element.textContent = fallbackTranslation;
            element.classList.remove('loading-translation');
        }
        
        // Translate all paragraphs when the page loads with optimized concurrency
        document.addEventListener('DOMContentLoaded', function() {
            const chineseTexts = document.querySelectorAll('.chinese-text, .article-title-chinese');
            
            // Limit concurrent translations to avoid overloading API
            const CONCURRENCY_LIMIT = 3;
            let activeTranslations = 0;
            let index = 0;
            
            // Function to process next translation
            const processNext = function() {
                if (index >= chineseTexts.length) return;
                
                // Wait if we've reached concurrency limit
                if (activeTranslations >= CONCURRENCY_LIMIT) {
                    setTimeout(processNext, 100);
                    return;
                }
                
                const element = chineseTexts[index++];
                const englishText = element.getAttribute('data-english');
                
                activeTranslations++;
                translateParagraph(englishText, element)
                    .finally(function() {
                        activeTranslations--;
                        processNext(); // Process next translation when current one finishes
                    });
            };
            
            // Start processing translations
            for (let i = 0; i < CONCURRENCY_LIMIT; i++) {
                processNext();
            }
        });
    </script>
</body>
</html>